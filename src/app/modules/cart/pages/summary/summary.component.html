<div *ngIf="success" class="relative z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true">
  <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
  <div class="fixed inset-0 z-10 overflow-y-auto">
    <div class="flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0">
      <div class="w-1/2 relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">
        <div class="bg-white">
          <div class="sm:flex sm:items-start">
            <div class="mt-10 sm:mt-0 w-full">
              <div class="xl:grid xl:grid-cols-3 xl:gap-6">

                <div class="mt-5 xl:col-span-2 xl:mt-0">
                  <div class="xl:col-span-1">
                    <div class="p-4">
                      <p class="text-lg font-medium leading-6 text-gray-900">Pedido realizado correctamente!</p>
                      <p class="text-xs font-medium leading-6 text-gray-900">Gracias por confiar en nosotros</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="p-4 flex justify-between items-center space-x-2">
          <button  (click)="goToShop()" class="self-end inline-flex justify-center rounded-full text-gray-700
           border border-gray-300 bg-white
           py-2 px-4 text-sm
          font-medium  shadow-sm
          hover:bg-gray-50 ">
            Cerrar</button>

          <button (click)="goToShop()" class="self-end inline-flex justify-center rounded-full
          border border-transparent
          bg-orange-600 py-2 px-4 text-sm
          font-medium text-white shadow-sm
          hover:bg-orange-700 ">
            Continuar</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="loading" class='flex items-center justify-center h-96'>
  <div style="border-top-color:transparent" class="w-8 h-8 border-4 border-blue-200 rounded-full animate-spin"></div>
  <p class="ml-2"></p>
</div>
<div *ngIf="!loading" class="flex flex-wrap justify-between ">
  <div
       class="animate__animated animate__fadeIn animate__fadeIn--slow p-10 w-auto mx-auto grid grid-cols-12 gap-6">
    <h1 class="text-3xl font-bold col-span-12">Resumen</h1>
    <div x-data="" class="bg-white p-4 rounded-lg shadow col-span-8">
      <div>
        <div *ngFor="let product of this.groupedProducts;" class="w-full flex flex-col sm:flex-row items-center gap-4 py-2">
          <a href="/src/product.html" class="w-36 h-32 flex items-center justify-center overflow-hidden">
            <img class="object-cover" alt="" src="{{ imgUrl }}storage/images/{{product.img}}">
          </a>
          <div class="flex-1 flex flex-col justify-between">
            <div class="flex justify-between mb-3">
              <h3 >{{product.product.name}}</h3>
            </div>
            <div class="flex justify-between items-center">
              <p>{{product.price/100 | number:'1.2-2'}}€</p>
              <div class="flex items-center">
                <p>Qty:&#160;{{product.count}}</p>

              </div>
              <span class="text-lg font-semibold">
                          <span>{{product.total/100 | number:'1.2-2'}}€</span>
                        </span>
            </div>
          </div>
        </div>
      </div>

    </div>
    <div x-data="" class="h-min bg-white p-4 rounded-lg shadow col-span-4 gap-6">
      <div class="flex justify-start py-4 ">
        <h1 class="mr-16 text-md font-bold">Resumen</h1>
      </div>
      <div class="flex justify-between py-4 ">
        <p class="mr-16 text-sm">Subtotal artículos</p>
        <p class="text-sm font-bold" >{{cart.total/100 | number:'1.2-2'}}€</p>
      </div>
      <div class="flex justify-between py-4 ">
        <p class="mr-16 text-sm ">Envío estimado</p>
      </div>
      <!-- <div class="flex justify-between py-4 ">
        <p class="mr-16 text-sm">Abono de portes</p>
        <p class="text-sm font-bold text-green-400" >-5,00€</p>
      </div>-->
      <div class="border-t border-gray-300 pt-4"></div>
      <div class="flex justify-between py-4 ">
        <p class="mr-16 text-sm">Total (Impuestos incluidos)</p>
        <p class="text-sm font-bold" >{{cart.total/100 | number:'1.2-2'}}€</p>
      </div>
      <div class="pt-4">
        <!-- <button (click)="createOrder()" type="submit" class="-->
        <!-- <button *ngIf="!showPaypalButtons" (click)="pay()" type="submit" class="-->
        <button  id="step-1" (click)="paymentIntent()" type="submit" class="
        text-white bg-text-primary
        hover:border-2 hover:border-primary
        hover:text-primary hover:bg-transparent
        rounded-md w-full py-3 text-lg">
          Continuar
        </button>
      </div>
    </div>
  </div>
</div>
